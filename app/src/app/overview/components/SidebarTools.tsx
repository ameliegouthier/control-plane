"use client";

import React from "react";

// Icon components
const N8nIcon = ({ className }: { className?: string }) => (
  <svg
    className={className}
    width="21"
    height="12"
    viewBox="0 0 21 12"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M18.7537 4.41263C17.7256 4.41263 16.8618 3.7095 16.6169 2.75789H14.0881C13.5488 2.75789 13.0886 3.14777 13 3.67969L12.9092 4.22377C12.8232 4.74034 12.5618 5.18993 12.1923 5.51579C12.5618 5.84164 12.8232 6.29124 12.9092 6.80781L13 7.35188C13.0886 7.88381 13.5488 8.27368 14.0881 8.27368H14.4106C14.6555 7.32208 15.5193 6.61895 16.5474 6.61895C17.7659 6.61895 18.7537 7.60675 18.7537 8.82526C18.7537 10.0438 17.7659 11.0316 16.5474 11.0316C15.5193 11.0316 14.6555 10.3284 14.4106 9.37684H14.0881C13.0095 9.37684 12.0891 8.5971 11.9118 7.53324L11.8211 6.98917C11.7325 6.45724 11.2723 6.06737 10.733 6.06737H9.85892C9.61402 7.01897 8.75016 7.7221 7.72211 7.7221C6.69405 7.7221 5.83023 7.01897 5.5853 6.06737H4.34312C4.09819 7.01897 3.23437 7.7221 2.20632 7.7221C0.987804 7.7221 0 6.7343 0 5.51579C0 4.29728 0.987804 3.30947 2.20632 3.30947C3.23437 3.30947 4.09819 4.01261 4.34312 4.96421H5.5853C5.83023 4.01261 6.69405 3.30947 7.72211 3.30947C8.75016 3.30947 9.61402 4.01261 9.85892 4.96421H10.733C11.2723 4.96421 11.7325 4.57434 11.8211 4.04241L11.9118 3.49833C12.0891 2.43448 13.0095 1.65474 14.0881 1.65474H16.6169C16.8618 0.703138 17.7256 0 18.7537 0C19.9722 0 20.96 0.987804 20.96 2.20632C20.96 3.42483 19.9722 4.41263 18.7537 4.41263ZM18.7537 3.30947C19.3629 3.30947 19.8568 2.81557 19.8568 2.20632C19.8568 1.59706 19.3629 1.10316 18.7537 1.10316C18.1445 1.10316 17.6505 1.59706 17.6505 2.20632C17.6505 2.81557 18.1445 3.30947 18.7537 3.30947ZM2.20632 6.61895C2.81557 6.61895 3.30947 6.12504 3.30947 5.51579C3.30947 4.90653 2.81557 4.41263 2.20632 4.41263C1.59706 4.41263 1.10316 4.90653 1.10316 5.51579C1.10316 6.12504 1.59706 6.61895 2.20632 6.61895ZM8.82526 5.51579C8.82526 6.12504 8.33136 6.61895 7.72211 6.61895C7.11285 6.61895 6.61895 6.12504 6.61895 5.51579C6.61895 4.90653 7.11285 4.41263 7.72211 4.41263C8.33136 4.41263 8.82526 4.90653 8.82526 5.51579ZM17.6505 8.82526C17.6505 9.43448 17.1566 9.92842 16.5474 9.92842C15.9381 9.92842 15.4442 9.43448 15.4442 8.82526C15.4442 8.21601 15.9381 7.7221 16.5474 7.7221C17.1566 7.7221 17.6505 8.21601 17.6505 8.82526Z"
      fill="currentColor"
    />
  </svg>
);

const ZapierIcon = ({ className }: { className?: string }) => (
  <svg
    className={className}
    width="23"
    height="7"
    viewBox="0 0 23 7"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clipPath="url(#clip0_17_845)">
      <path
        d="M5.39174 4.26354L5.38852 4.25329L7.42999 2.38438V1.48389H4.15478V2.38438H6.11107L6.11429 2.39301L4.09277 4.26354V5.16405H7.46286V4.26354H5.39174Z"
        fill="currentColor"
      />
      <path
        d="M9.47299 1.39795C9.09521 1.39795 8.78731 1.45493 8.54931 1.56888C8.32766 1.66819 8.1409 1.83182 8.01333 2.03854C7.89132 2.24662 7.81468 2.47815 7.78851 2.71795L8.78226 2.85761C8.81822 2.64588 8.89013 2.4958 8.99795 2.40736C9.12056 2.31487 9.27163 2.26814 9.42501 2.27526C9.62669 2.27526 9.77299 2.32918 9.86395 2.43702C9.954 2.54486 9.99983 2.69422 9.99983 2.89104V2.98917H9.04433C8.55794 2.98917 8.20854 3.09702 7.99611 3.3127C7.78364 3.52839 7.67761 3.8131 7.67798 4.16682C7.67798 4.52917 7.78401 4.79879 7.99611 4.97563C8.20817 5.15252 8.47492 5.24041 8.79632 5.2393C9.19495 5.2393 9.5016 5.10219 9.71618 4.82791C9.84292 4.65933 9.93343 4.4664 9.98202 4.26118H10.0182L10.1551 5.16165H11.0556V2.88134C11.0556 2.41006 10.9314 2.04501 10.683 1.78619C10.4346 1.52737 10.0313 1.39795 9.47299 1.39795ZM9.78791 4.20888C9.64501 4.32804 9.45793 4.38736 9.22498 4.38736C9.03299 4.38736 8.89964 4.35375 8.82488 4.28653C8.78846 4.25472 8.75944 4.21529 8.73997 4.17102C8.7205 4.12676 8.711 4.07874 8.71219 4.0304C8.71003 3.98481 8.71724 3.93925 8.73327 3.89652C8.74929 3.85379 8.77386 3.81476 8.80545 3.78182C8.83962 3.74977 8.87994 3.72499 8.92397 3.70896C8.96801 3.69292 9.0148 3.68597 9.0616 3.68853H10.0014V3.75055C10.0034 3.8382 9.98509 3.92511 9.94808 4.00458C9.91102 4.08405 9.85624 4.15395 9.78791 4.20888Z"
        fill="currentColor"
      />
      <path
        d="M16.5004 1.48389H15.4365V5.16456H16.5004V1.48389Z"
        fill="currentColor"
      />
      <path
        d="M22.7813 1.48389C22.4808 1.48389 22.2439 1.58993 22.0706 1.80203C21.9462 1.95444 21.8517 2.17966 21.787 2.47766H21.7557L21.6166 1.48389H20.708V5.16405H21.7719V3.27678C21.7719 3.03881 21.8276 2.85637 21.9391 2.72948C22.0505 2.60258 22.2561 2.53913 22.5559 2.53913H22.9598V1.48389H22.7813Z"
        fill="currentColor"
      />
      <path
        d="M19.6534 1.60389C19.405 1.45615 19.0917 1.38246 18.7135 1.38281C18.1182 1.38281 17.6523 1.55231 17.3159 1.8913C16.9794 2.23028 16.8112 2.6976 16.8112 3.29326C16.8026 3.65337 16.8812 4.01022 17.0403 4.3334C17.186 4.62138 17.4128 4.8604 17.6928 5.02089C17.9746 5.18376 18.3098 5.26536 18.6984 5.26568C19.0345 5.26568 19.3153 5.21393 19.5407 5.11043C19.7526 5.01744 19.9371 4.87169 20.0766 4.68714C20.2095 4.50594 20.3082 4.302 20.3678 4.08536L19.4512 3.82869C19.4126 3.96957 19.3383 4.0981 19.2355 4.20183C19.1319 4.30536 18.9585 4.35713 18.7151 4.35713C18.4258 4.35713 18.2101 4.27427 18.0681 4.10855C17.9651 3.98884 17.9004 3.81791 17.8718 3.59629H20.3819C20.3921 3.49276 20.3975 3.40595 20.3975 3.33585V3.10668C20.4036 2.79882 20.34 2.49357 20.2115 2.21375C20.0912 1.95883 19.8966 1.74625 19.6534 1.60389ZM18.6828 2.26012C19.1142 2.26012 19.3588 2.47239 19.4166 2.89693H17.8907C17.9149 2.75528 17.9736 2.62176 18.0616 2.50816C18.2015 2.34244 18.4085 2.25976 18.6828 2.26012Z"
        fill="currentColor"
      />
      <path
        d="M15.9797 0.000345262C15.8997 -0.00237663 15.8199 0.0110175 15.7452 0.0397327C15.6704 0.0684479 15.6022 0.111896 15.5446 0.167498C15.4878 0.223633 15.4433 0.290967 15.4138 0.365225C15.3844 0.439483 15.3707 0.519043 15.3737 0.598866C15.3708 0.679203 15.3845 0.759269 15.414 0.834068C15.4434 0.908872 15.488 0.976801 15.5448 1.03362C15.6017 1.09043 15.6697 1.13492 15.7445 1.16431C15.8193 1.19369 15.8994 1.20734 15.9797 1.2044C16.0596 1.20742 16.1392 1.19377 16.2134 1.16434C16.2877 1.13492 16.355 1.09034 16.4111 1.03347C16.4668 0.976002 16.5102 0.90788 16.5388 0.833191C16.5675 0.758502 16.5807 0.678799 16.5777 0.598866C16.5814 0.519406 16.5685 0.440051 16.5397 0.36587C16.511 0.29169 16.4672 0.224313 16.411 0.168041C16.3547 0.11177 16.2874 0.0678399 16.2132 0.039058C16.1391 0.0102763 16.0597 -0.00272385 15.9803 0.000884998L15.9797 0.000345262Z"
        fill="currentColor"
      />
      <path
        d="M13.7825 1.38281C13.4202 1.38281 13.129 1.49658 12.909 1.72413C12.7462 1.89273 12.6267 2.14436 12.5504 2.47903H12.5165L12.3774 1.48526H11.4688V6.22174H12.5326V4.27085H12.5715C12.6039 4.40093 12.6494 4.52739 12.7074 4.64829C12.7974 4.84524 12.9449 5.01032 13.1306 5.12172C13.3232 5.22679 13.5401 5.27909 13.7593 5.27326C14.2048 5.27326 14.5439 5.09982 14.7769 4.75289C15.0098 4.40601 15.1263 3.92198 15.1263 3.3008C15.1263 2.70084 15.0136 2.23118 14.7882 1.89183C14.5628 1.55249 14.2276 1.38281 13.7825 1.38281ZM13.8904 4.04977C13.7664 4.22951 13.5723 4.31938 13.308 4.31938C13.1991 4.32441 13.0905 4.30341 12.9913 4.25812C12.8921 4.21283 12.8051 4.14455 12.7376 4.05894C12.5999 3.88603 12.5312 3.64931 12.5316 3.34879V3.27869C12.5316 2.97349 12.6002 2.73984 12.7376 2.57771C12.8749 2.41559 13.065 2.33542 13.308 2.33722C13.5769 2.33722 13.7723 2.4226 13.8942 2.59335C14.016 2.7641 14.077 3.00225 14.077 3.30781C14.0777 3.62379 14.0158 3.87111 13.8914 4.04977H13.8904Z"
        fill="currentColor"
      />
      <path
        d="M3.68069 4.26318H0V5.16476H3.68069V4.26318Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_17_845">
        <rect width="22.96" height="6.24512" fill="white" />
      </clipPath>
    </defs>
  </svg>
);

const MakeIcon = ({ className }: { className?: string }) => (
  <svg
    className={className}
    width="17"
    height="13"
    viewBox="0 0 17 13"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <mask
      id="mask0_17_808"
      style={{ maskType: "luminance" }}
      maskUnits="userSpaceOnUse"
      x="13"
      y="0"
      width="4"
      height="12"
    >
      <path
        d="M13.6014 0.132324H16.5528C16.777 0.132324 16.9638 0.319124 16.9638 0.543283V11.4524C16.9638 11.6765 16.777 11.8633 16.5528 11.8633H13.6014C13.3772 11.8633 13.1904 11.6765 13.1904 11.4524V0.543283C13.1904 0.319124 13.3772 0.132324 13.6014 0.132324Z"
        fill="white"
      />
    </mask>
    <g mask="url(#mask0_17_808)">
      <path
        d="M16.5092 -1.07867L9.39307 1.54541L13.6459 13.0784L20.762 10.4544L16.5092 -1.07867Z"
        fill="currentColor"
      />
    </g>
    <mask
      id="mask1_17_808"
      style={{ maskType: "luminance" }}
      maskUnits="userSpaceOnUse"
      x="0"
      y="0"
      width="9"
      height="12"
    >
      <path
        d="M4.9339 0.281777L0.0397568 10.0327C-0.0536429 10.2382 0.0210769 10.481 0.226556 10.5744L2.86043 11.9007C3.06591 11.9941 3.30875 11.9194 3.40215 11.7139L8.29629 1.96297C8.38969 1.75749 8.31497 1.51465 8.10949 1.42125L5.4943 0.0949771C5.43826 0.0576172 5.38222 0.0576172 5.3075 0.0576172C5.15806 0.0576172 5.00862 0.151017 4.9339 0.281777Z"
        fill="white"
      />
    </mask>
    <g mask="url(#mask1_17_808)">
      <path
        d="M7.08472 -3.036L-4.40332 1.93018L1.28184 15.0814L12.7699 10.1152L7.08472 -3.036Z"
        fill="currentColor"
      />
    </g>
    <mask
      id="mask2_17_808"
      style={{ maskType: "luminance" }}
      maskUnits="userSpaceOnUse"
      x="6"
      y="0"
      width="7"
      height="13"
    >
      <path
        d="M9.06211 0.319139L6.96996 10.948C6.9326 11.1722 7.06336 11.3777 7.28752 11.4337L10.1829 12.0128C10.4071 12.0501 10.6125 11.9194 10.6686 11.6952L12.7607 1.06634C12.7981 0.842177 12.6673 0.636698 12.4432 0.580658L9.54779 0.00157984C9.52911 0.00157984 9.49175 0.00157984 9.47307 0.00157984C9.26759 -0.0171001 9.09947 0.132339 9.06211 0.319139Z"
        fill="white"
      />
    </mask>
    <g mask="url(#mask2_17_808)">
      <path
        d="M12.0999 -1.91491L3.01978 1.42822L7.62788 13.9441L16.708 10.601L12.0999 -1.91491Z"
        fill="currentColor"
      />
    </g>
  </svg>
);

const AirtableIcon = ({ className }: { className?: string }) => (
  <svg
    className={className}
    width="17"
    height="15"
    viewBox="0 0 17 15"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M7.56824 0.182366L1.26142 2.79628C0.911884 2.94825 0.911884 3.43456 1.26142 3.58653L7.61383 6.10926C8.17612 6.32202 8.78401 6.32202 9.3463 6.10926L15.6987 3.58653C16.0482 3.43456 16.0634 2.94825 15.6987 2.79628L9.3767 0.182366C8.79921 -0.0607886 8.14573 -0.0607886 7.56824 0.182366Z"
      fill="currentColor"
    />
    <path
      d="M9.04224 7.47741V13.769C9.04224 14.073 9.34618 14.2857 9.61973 14.1642L16.7016 11.4287C16.8688 11.3679 16.96 11.2159 16.96 11.0335V4.74192C16.96 4.43798 16.656 4.22522 16.3825 4.3468L9.30059 7.08229C9.13342 7.14307 9.04224 7.29505 9.04224 7.47741Z"
      fill="currentColor"
    />
    <path
      d="M0 4.75701V10.6687C0 10.9878 0.364732 11.1854 0.638281 11.0486L5.06065 8.92103L5.27341 8.81465L0.136775 4.46826C0.0607888 4.54425 0 4.63543 0 4.75701Z"
      fill="currentColor"
    />
    <path
      d="M7.35518 7.03617L0.622843 4.36147C0.486069 4.31588 0.349294 4.33108 0.242914 4.39186C0.21252 4.40706 0.166929 4.43746 0.121338 4.46785L5.27317 8.81424L7.37038 7.81122C7.71991 7.64406 7.68952 7.15775 7.35518 7.03617Z"
      fill="currentColor"
    />
  </svg>
);

const SIDEBAR_TOOLS = [
  {
    id: "n8n",
    icon: N8nIcon,
    activeClasses: "bg-rose-100 text-rose-600 ring-2 ring-rose-300 ring-offset-1",
  },
  {
    id: "zapier",
    icon: ZapierIcon,
    activeClasses: "bg-orange-100 text-orange-600 ring-2 ring-orange-300 ring-offset-1",
  },
  {
    id: "make",
    icon: MakeIcon,
    activeClasses: "bg-violet-100 text-violet-600 ring-2 ring-violet-300 ring-offset-1",
  },
  {
    id: "airtable",
    icon: AirtableIcon,
    activeClasses: "bg-sky-100 text-sky-600 ring-2 ring-sky-300 ring-offset-1",
  },
] as const;

interface SidebarToolsProps {
  selectedTool: string | null;
  onSelectTool: (tool: string | null) => void;
}

export default function SidebarTools({
  selectedTool,
  onSelectTool,
}: SidebarToolsProps) {
  return (
    <aside className="fixed left-5 top-1/2 z-40 -translate-y-1/2">
      <nav
        className="flex flex-col items-center gap-3 rounded-2xl border border-zinc-200/80 bg-white px-2.5 py-4 shadow-lg shadow-zinc-900/5"
        aria-label="Tool filter"
      >
        {/* Avatar / reset filter */}
        <button
          type="button"
          onClick={() => onSelectTool(null)}
          title="All tools"
          className="flex h-10 w-10 items-center justify-center rounded-full bg-indigo-600 text-xs font-bold text-white transition hover:bg-indigo-700"
        >
          JD
        </button>

        <div className="my-1 h-px w-7 bg-zinc-100" />

        {/* All workflows button - no filter */}
        <button
          type="button"
          onClick={() => onSelectTool(null)}
          title="All workflows"
          aria-pressed={selectedTool === null}
          className={`flex h-10 w-10 items-center justify-center rounded-xl transition ${
            selectedTool === null
              ? "bg-indigo-100 text-indigo-600 ring-2 ring-indigo-300 ring-offset-1"
              : "border border-zinc-200 bg-zinc-50 text-zinc-400 hover:border-zinc-300 hover:bg-zinc-100 hover:text-zinc-600"
          }`}
        >
          <svg className="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
            <circle cx="4" cy="10" r="1.5" />
            <circle cx="10" cy="10" r="1.5" />
            <circle cx="16" cy="10" r="1.5" />
          </svg>
        </button>

        {/* Tool filter buttons */}
        {SIDEBAR_TOOLS.map((tool) => {
          const isActive = selectedTool === tool.id;
          const IconComponent = tool.icon;
          return (
            <button
              key={tool.id}
              type="button"
              onClick={() => onSelectTool(isActive ? null : tool.id)}
              title={tool.id}
              aria-pressed={isActive}
              className={`flex h-10 w-10 items-center justify-center rounded-xl transition ${
                isActive
                  ? tool.activeClasses
                  : "border border-zinc-200 bg-zinc-50 text-zinc-400 hover:border-zinc-300 hover:bg-zinc-100 hover:text-zinc-600"
              }`}
            >
              <IconComponent className="h-5 w-5" />
            </button>
          );
        })}

        <div className="my-1 h-px w-7 bg-zinc-100" />

        {/* Settings */}
        <button
          type="button"
          title="Settings"
          className="flex h-9 w-9 items-center justify-center rounded-lg text-zinc-300 transition hover:bg-zinc-50 hover:text-zinc-500"
        >
          <svg
            className="h-[18px] w-[18px]"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="1.5"
            strokeLinecap="round"
            strokeLinejoin="round"
          >
            <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" />
            <circle cx="12" cy="12" r="3" />
          </svg>
        </button>

        {/* Help */}
        <button
          type="button"
          title="Help"
          className="flex h-9 w-9 items-center justify-center rounded-lg text-zinc-300 transition hover:bg-zinc-50 hover:text-zinc-500"
        >
          <svg
            className="h-[18px] w-[18px]"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="1.5"
            strokeLinecap="round"
            strokeLinejoin="round"
          >
            <circle cx="12" cy="12" r="10" />
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
            <path d="M12 17h.01" />
          </svg>
        </button>
      </nav>
    </aside>
  );
}
